# ===========================================================================
# GENERATED FILE - DO NOT EDIT DIRECTLY
# ===========================================================================
# This file is generated by compliance-cli from templates.
# To make changes, edit the template at:
# compliance-cli/internal/generate/templates/pipelines/preview.yaml.tmpl
# 
# Generated on: 2025-09-12 16:37:19 EDT
# To regenerate: make generate-pipelines
# ===========================================================================

# Cloud Deploy Configuration for Preview Deployments
# Single stage with kubectl preDeploy hook for proper sequencing

apiVersion: deploy.cloud.google.com/v1
kind: DeliveryPipeline
metadata:
  name: webapp-preview-pipeline
  labels:
    compliance: iso27001-soc2-gdpr
    team: webapp-team
    purpose: preview
description: "Preview deployment with Config Connector certificate provisioning"

serialPipeline:
  stages:
  - targetId: preview-gke
    profiles: ["preview-all"]
    strategy:
      standard:
        verify: false

---
apiVersion: deploy.cloud.google.com/v1
kind: Target
metadata:
  name: preview-gke
  labels:
    compliance: iso27001-soc2-gdpr
    environment: preview
    data-residency: eu
description: "Preview deployment target"

gke:
  cluster: projects/u2i-tenant-webapp-nonprod/locations/europe-west1/clusters/webapp-cluster
  
executionConfigs:
- usages: [RENDER, DEPLOY, PREDEPLOY]
  serviceAccount: cloud-deploy-sa@u2i-tenant-webapp-nonprod.iam.gserviceaccount.com
  artifactStorage: gs://u2i-tenant-webapp-nonprod-deploy-artifacts